<% set_meta_tags :title => '比賽登錄及管理系統'%>

<div class="row">
  <%= link_to_if(current_user && ((current_user.has_role? :admin) || (current_user.has_role? :superuser) || (current_user.has_role? :gameholder)), '登錄新比賽', new_holdgame_path, :class=> "button radius") %>

  <div class="col-md-12 col-sm-12 col-md-12 col-lg-12">

    <div class="table-responsive datagrid">
      <table class="datatable  table-striped table-condensed" border=1 link=blue>
        <caption class="text-center" ><strong>桌球愛好者聯盟比賽登錄及報名系統</strong></caption>
        <thead>
          <tr>
            <th>賽事名稱</th>
            <th>比賽日期</th>
            <th>比賽地點</th>
            <th>主辦人員</th>
            <th>詳細比賽資訊</th>
            <th>功能操作</th>
          </tr>
        </thead>
        <tbody>
          <% @holdgames.each do |holdgame| %>
            <tr>
                <td><%= holdgame.gamename %></td>
                <% if holdgame.gamedays==1 %>
                    <td><%= holdgame.startdate.strftime('%F') %></td>
                <%else%>
                  <td><%= holdgame.startdate.strftime('%F') %>~<%= holdgame.enddate.strftime('%F') %></td>
                <%end%>    
                <td><%= holdgame.gameholder.courtname %></td>
                <td><%= holdgame.gameholder.name %></td>
                <td>
                  <p style="white-space: pre-line ;width:auto; text-align:justify ">
                    <%= holdgame.gamenote %>
                  </p>
                </td>
             
               
              

            <td><%= link_to '分組及報名', holdgame_gamegroups_path(holdgame),:class=> "button radius" %>
            <%= link_to_if( current_user &&((current_user.has_role? :admin) || (current_user.has_role? :superuser)  || (current_user.id==holdgame.gameholder.user_id)), '修改資料',  edit_holdgame_path(holdgame),:class=> "button radius" )%>
            



            <%= link_to_if( current_user&& ((current_user.has_role? :admin) || (current_user.has_role? :superuser)  || (current_user.id==  holdgame.gameholder.user_id)), '刪除比賽', holdgame, method: :delete, data: { confirm: '確定要刪除本場比賽資料?'},:class=> "button radius"  ) %></td>

           
            </td>

            </tr>
          <% end %>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="8">
              <div class="text-center">
               <%= paginate @holdgames, :theme => 'twitter-bootstrap-3' %>
              </div>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>

 



